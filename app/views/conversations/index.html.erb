<div class="container py-4">
  <div class="d-flex align-items-center mb-3">
    <h1 class="m-0">Our Past Conversations</h1>
    <div class="ms-auto">
      <%= link_to "New Conversation", new_conversation_path, class: "btn btn-primary btn-sm" %>
    </div>
  </div>
  <% if @conversations.any? %>
    <ul class="list-group">
      <% @conversations.each do |c| %>
        <li class="list-group-item">
          <div class="d-flex justify-content-between">
            <div class="me-3">
              <strong>
                <%= link_to (c.title.presence || "Conversation ##{c.id}").truncate(80),
                            conversation_path(c) %>
              </strong>
              <div class="text-muted small">
                <time datetime="<%= c.created_at.iso8601 %>">
                  <%= time_ago_in_words(c.created_at) %> ago
                </time>
              </div>
            </div>
            <div class="text-nowrap">
              <%= link_to "Open", conversation_path(c), class: "btn btn-sm btn-primary me-2" %>
              <%= link_to "Delete", conversation_path(c),
                          class: "btn btn-sm btn-outline-danger",
                          data: { turbo_method: :delete, turbo_confirm: "Delete this conversation?" } %>
            </div>
          </div>
          <% if c.submitted_text.present? %>
            <p class="mb-0 mt-2 text-muted">
              <%= c.submitted_text.truncate(160) %>
            </p>
          <% end %>
        </li>
      <% end %>
    </ul>
  <% else %>
    <div class="text-center text-muted py-5 border rounded">
      <p class="mb-3">No conversations yet.</p>
      <%= link_to "Start your first conversation", new_conversation_path, class: "btn btn-primary" %>
    </div>
  <% end %>
</div>
